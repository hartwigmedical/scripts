#!/usr/bin/env bash

source message_functions || exit 1
source locate_files || exit 1
source io_functions || exit 1

compar_jar="/data/experiments/pilot_tools/compar/compar.jar"

base_dir="/data/experiments/verification_pipeline_v5_35_0"

output_dir="${base_dir}/compar_pilot_COLO829"
create_or_cleanup_dir ${output_dir}

driver_gene_panel=$(locate_driver_gene_panel_37_tsv)

base_dir_534="${base_dir}/COLO829_v5_34_1"
base_dir_535="${base_dir}/COLO829_v5_35_0"

file_sources_v534="linx_dir=${base_dir_534}/linx/;purple_dir=${base_dir_534}/purple/"
file_sources_v535="linx_dir=${base_dir_535}/linx/;purple_dir=${base_dir_535}/purple/"

info "Running compar on COLO829 v5.34 versus v5.35"

java -jar ${compar_jar} \
    -sample "COLO829v003T" \
    -categories "DRIVER,FUSION,DISRUPTION" \
    -match_level "REPORTABLE" \
    -file_source_ref "${file_sources_v534}"\
    -file_source_new "${file_sources_v535}"\
    -output_dir "${output_dir}" \
    -output_id "v534_vs_v535" \
    -driver_gene_panel "${driver_gene_panel}" \
    -log_debug

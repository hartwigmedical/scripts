#!/usr/bin/env bash

source locate_files || exit 1
source message_functions || exit 1
source actin_config || exit 1

if [[ $(hostname) != "data-vm-prod-2" ]]; then
    error "EMC data-vm sync is only supported on data-vm-prod-2"
fi

actin_clinical_input_feed_bucket="$(locate_actin_clinical_feed_input_bucket $(production_actin_emc_project))/actin-1"

do_sync_actin_input_data_to_vm $(production_actin_emc_project) ${actin_clinical_input_feed_bucket}

# We need to convert the EMC input feed to a format usable by downstream tools. This is done automatically in pipeline.
check_and_convert_emc_clinical_data_dump $(locate_actin_clinical_input_feed_directory)

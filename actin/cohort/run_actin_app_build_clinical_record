#!/usr/bin/env bash

source locate_files || exit 1
source api_functions || exit 1
source message_functions || exit 1

sample=$1 && shift

if [[ -z "${sample}" ]]; then
    error "Sample parameter missing. Exiting."
fi

primary_tumor_doids=$(get_primary_tumor_doids_for_sample ${sample})
if [[ -z "${primary_tumor_doids}" ]]; then
    primary_tumor_doids="\"\""
fi

output_directory=$(locate_rr_actin_clinical_directory)

actin_clinical_jar="$(locate_rr_actin_clinical_jar)"

info "Running ACTIN Build Clinical From Doids Only on ${sample}"

java -cp ${actin_clinical_jar} com.hartwig.actin.clinical.util.BuildClinicalFromDoidsOnlyKt \
    -patient ${sample} \
    -primary_tumor_doids ${primary_tumor_doids} \
    -output_directory ${output_directory} \
    "$@"
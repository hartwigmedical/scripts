#!/usr/bin/env bash

source message_functions || exit 1

if [[ ! -d "$HOME/.pyenv" ]]; then 
    info "PyEnv not yet present, installing"
    curl -fsSL https://pyenv.run | bash
    info "Assuming some Python build dependencies could be missing, attempting to install them via sudo"
    sudo apt update
    sudo apt install -y make build-essential libssl-dev zlib1g-dev \ 
        libbz2-dev libreadline-dev libsqlite3-dev curl git \ 
        libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev
else
    info "PyEnv is already installed"
fi

cat<<'EOM'

To configuring PyEnv for this shell ONLY run these commands:

export PYENV_ROOT="$HOME/.pyenv"
[[ -d $PYENV_ROOT/bin ]] && export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init - bash)"

You can also put those in "$HOME/.bashrc"

Run "pyenv versions" to see the available options
Use "pyenv install 3.11" to install Python 3.11
Then run "pyenv shell (version)" to switch for this session only

You then probably want to use py_venv to create a virtual environment and maybe use "pip"

EOM
#!/usr/bin/env bash

patient_id=$1 && shift

if [[ -z "${patient_id}" ]]; then
    error "Parameters missing. Exiting.";
fi

gcloud pubsub topics publish projects/actin-prod/topics/analysis-pipeline.pending \
    --message="{\"patientId\": \"${patient_id}\", \"trigger\": \"MANUAL\"}"
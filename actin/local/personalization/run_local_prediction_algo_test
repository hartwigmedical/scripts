#!/usr/bin/env bash

latest_prediction_docker_image="ef3026084c33"

# (KODU): Latest docker image is 0.28.0-beta.6. You can pull via this command:
#   docker pull europe-west4-docker.pkg.dev/actin-build/build-registry-docker/actin-personalization-prediction:0.28.0-beta.6
#
# If your docker can't access gcloud yet, run the following command:
#   gcloud auth configure-docker europe-west4-docker.pkg.dev

docker run \
    -v ~/hmf/tmp:/out \
    -v ~/hmf/repos/actin-personalization/prediction/src/test/python/:/data \
    -v ~/hmf/repos/actin-resources-private/personalization/:/resources \
    ${latest_prediction_docker_image} \
     /data/testReferenceObject.json \
     /out/output.json \
     --trained_path /resources/prediction_model \
     --treatment_config /resources/treatment_combinations.json